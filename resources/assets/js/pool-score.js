/*! For license information please see pool-score.js.LICENSE.txt */
({"./resources/js/pool-score.js":function(){var e=this,t=document.getElementsByClassName("chart-update-request");if(t.length>0){var s=document.getElementById("spinner");s.style.display="none",t[0].addEventListener("click",(function(t){t.preventDefault(),s.style.display="";var n=new XMLHttpRequest;n.open("GET","/pool/chart/update",!0),n.onload=function(){e.status>=200&&e.status<400&&(s.innerHTML='<div class="green bigger-120"><span class="fas fa-check-circle green"></span> Chart updated!</div>')},n.send()}))}function n(e,t){var s=document.getElementById("snackbar");s.className=t+" black show",s.innerHTML=e,setTimeout((function(){s.className="bg-success black",s.innerHTML=""}),4e3)}document.querySelectorAll(".score").forEach((function(e){e.addEventListener("focus",(function(t){t.preventDefault();var s=e.getAttribute("id"),n=document.getElementById(s);n.classList.remove("green"),n.classList.remove("bigger-110")})),e.addEventListener("change",(function(t){t.preventDefault();var s=$('meta[name="csrf-token"]').attr("content"),a=t.target.value;if(a>=0&&a<=15){var r=e.getAttribute("id"),o=t.target.dataset.team,c=t.target.dataset.event,i=t.target.dataset.field,l=document.getElementById("form_"+c+"_"+r),d=document.getElementById("spinner_"+c+"_"+r);l.style.display="none",d.style.display="";var u=new XMLHttpRequest;u.open("PUT","/pool/score/update",!0),u.setRequestHeader("Content-type","application/json; charset=utf-8");var g={team:o,event:c,val:a,field:i,_token:s};u.onload=function(){"success"===JSON.parse(u.responseText).type?(l.style.display="",d.style.display="none",e.classList.add("green"),e.classList.add("bigger-110"),n("Your score has been updated to <strong>"+a+"</strong>","bg-success")):n("Something went wrong<br>Do you have access?<br>Reload the page","bg-warning")},u.send(JSON.stringify(g))}else{var p=e.getAttribute("value");e.value=p,n("The score <strong>"+a+"</strong> is not valid! Reset to <strong>"+p+"</strong>.","bg-warning")}}))}))}})["./resources/js/pool-score.js"]();